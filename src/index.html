<!doctype html>
<html lang="en">
	<head>
		<title>Calculator</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="user-scalable=no" />
	</head>
	<body>
		<header>
			<button class="theme-toggle" onclick="toggleTheme()">
				<svg
					id="light-mode-icon"
					xmlns="http://www.w3.org/2000/svg"
					height="40px"
					viewBox="0 -960 960 960"
					width="40px"
					fill="currentColor"
				>
					<path
						d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"
					/>
				</svg>
				<svg
					id="dark-mode-icon"
					xmlns="http://www.w3.org/2000/svg"
					height="40px"
					viewBox="0 -960 960 960"
					width="40px"
					fill="currentColor"
				>
					<path
						d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"
					/>
				</svg>
			</button>
		</header>

		<main>
			<div class="calculator-container">
				<div class="calculator-screen">
					<p class="expression-display" id="expression-display"></p>
					<p
						class="current-operand-display"
						id="current-operand-display"
					>
						0
					</p>
				</div>

				<div class="btn-container">
					<div class="buttons">
						<div class="btn-wrapper">
							<button class="btn bg-button" onclick="clearAll()">
								(
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								)
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								mc
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								m+
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								m-
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								mr
							</button>
						</div>

						<div class="btn-wrapper">
							<button class="btn bg-button" onclick="clearAll()">
								2<sup>nd</sup>
							</button>
							<button class="btn bg-button" onclick="power(2)">
								x<sup>2</sup>
							</button>
							<button class="btn bg-button" onclick="power(3)">
								x<sup>3</sup>
							</button>
							<button
								class="btn bg-button"
								onclick="setOperator('^')"
							>
								x<sup>y</sup>
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								e<sup>x</sup>
							</button>
							<button
								class="btn bg-button"
								onclick="exponentiate(10)"
							>
								10<sup>x</sup>
							</button>
						</div>

						<div class="btn-wrapper">
							<button
								class="btn bg-button"
								onclick="reciprocate()"
							>
								<span class="fraction">
									<span><sup>1</sup></span>
									<span>/</span>
									<span><sub>x</sub></span>
								</span>
							</button>
							<button
								class="btn bg-button"
								onclick="extractRoot(2)"
							>
								<span class="sqrt">
									<span class="square"><sup>2</sup></span>
									<span class="symbol">√</span>
									<span class="value">x</span>
								</span>
							</button>
							<button
								class="btn bg-button"
								onclick="extractRoot(3)"
							>
								<span class="sqrt">
									<span class="square"><sup>3</sup></span>
									<span class="symbol">√</span>
									<span class="value">x</span>
								</span>
							</button>
							<button
								class="btn bg-button"
								onclick="setOperator('sqrt')"
							>
								<span class="sqrt">
									<span class="square"><sup>y</sup></span>
									<span class="symbol">√</span>
									<span class="value">x</span>
								</span>
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								in
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								log<sub>10</sub>
							</button>
						</div>

						<div class="btn-wrapper">
							<button class="btn bg-button" onclick="factorial()">
								x!
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								sin
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								cos
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								tan
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								e
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								EE
							</button>
						</div>

						<div class="btn-wrapper">
							<button
								class="btn bg-button br-l"
								onclick="clearAll()"
							>
								Rad
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								sinh
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								cosh
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								tanh
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								π
							</button>
							<button class="btn bg-button" onclick="clearAll()">
								Rand
							</button>
						</div>
					</div>
					<div class="buttons">
						<div class="btn-wrapper">
							<button class="btn bg-button" onclick="clearAll()">
								AC
							</button>
							<button
								class="btn bg-button"
								onclick="invertCurrentOperand()"
							>
								+/-
							</button>
							<button
								class="btn bg-button"
								onclick="setOperator('%')"
							>
								%
							</button>
							<button
								class="btn bg-accent"
								onclick="setOperator('/')"
							>
								÷
							</button>
						</div>

						<div class="btn-wrapper">
							<button class="btn" onclick="append('7')">7</button>
							<button class="btn" onclick="append('8')">8</button>
							<button class="btn" onclick="append('9')">9</button>
							<button
								class="btn bg-accent"
								onclick="setOperator('*')"
							>
								×
							</button>
						</div>

						<div class="btn-wrapper">
							<button class="btn" onclick="append('4')">4</button>
							<button class="btn" onclick="append('5')">5</button>
							<button class="btn" onclick="append('6')">6</button>
							<button
								class="btn bg-accent"
								onclick="setOperator('-')"
							>
								-
							</button>
						</div>

						<div class="btn-wrapper">
							<button class="btn" onclick="append('1')">1</button>
							<button class="btn" onclick="append('2')">2</button>
							<button class="btn" onclick="append('3')">3</button>
							<button
								class="btn bg-accent"
								onclick="setOperator('+')"
							>
								+
							</button>
						</div>

						<div class="btn-wrapper-grid">
							<button class="btn" onclick="append('0')">0</button>
							<button class="btn" onclick="append('.')">,</button>
							<button
								class="btn bg-accent br-r"
								onclick="calculate()"
							>
								=
							</button>
						</div>
					</div>
				</div>
			</div>
		</main>

		<script>
			const themeToSet = getTheme();
			setTheme(themeToSet);

			function getTheme() {
				const savedTheme = localStorage.getItem("theme");

				if (savedTheme) {
					return savedTheme;
				}

				const isDarkMatch = window.matchMedia(
					"(prefers-color-scheme: dark)",
				);
				return isDarkMatch.matches ? "dark" : "light";
			}

			function setTheme(theme) {
				document.documentElement.setAttribute("data-theme", theme);
			}

			function toggleTheme() {
				const currentTheme = getTheme();
				const newTheme = currentTheme === "light" ? "dark" : "light";

				setTheme(newTheme);
				localStorage.setItem("theme", newTheme);
			}
		</script>
	</body>
</html>
